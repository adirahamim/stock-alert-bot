
# 📈 Stock Alert Bot – גרסה ניהולית מתקדמת

בוט חכם לניטור, ניתוח ושליחת התראות על מניות חמות – כולל ניהול מלא מהטלגרם.

---

## 🚀 איך להפעיל

### ניטור תיק אישי:
```bash
python main.py
```

### חקירת שוק למציאת מניות חמות (AI Score גבוה):
```bash
python explorer.py
```

### מאזין לפקודות ניהול בטלגרם (מנהל בלבד):
```bash
python listener.py
```

---

## 🛠️ פקודות ניהול זמינות בטלגרם

(נשלחות רק ע"י הבעלים – `OWNER_CHAT_ID` בלבד)

| פקודה | תיאור |
|-------|--------|
| `/explore` | מריץ את `explorer.py` – סריקה חכמה עם AI Score |
| `/update_prices` | מעדכן טווחי מחירים (`low`, `high`, `buy_price`) לכל המניות |
| `/send_report` | שולח דו"ח מצב תיק: מצב כל מניה מול הטווח שלה |
| `/add_stock <SYMBOL>` | מוסיף מניה חדשה למעקב עם טווחים מחושבים אוטומטית |
| `/reset_prices` | מאפס טווחי קנייה/מכירה לכל המניות ב־settings.py |
| `/snapshot` | מגבה את `settings.py` עם חותמת זמן |
| `/reset_suggestions` | איפוס הצעות של עדכון `low` / `high` |
| `/approve`, `/reject` | מאשרים/דוחים הצעות שהבוט שולח לשינוי טווחים |

---

## 📂 קבצים חשובים

| קובץ | תיאור |
|------|--------|
| `main.py` | מנוע ניטור תיק אישי, מבצע ניתוח לפי AI ויוצר התראות |
| `explorer.py` | סורק מניות מהשוק (S&P 500) ומחשב AI Score |
| `listener.py` | מאזין לפקודות ניהול בטלגרם |
| `update_levels.py` | מחשב אוטומטית טווחים (`low`, `high`, `buy_price`) |
| `settings.py` | קובץ ההגדרות הראשי – תקציב, רשימת מניות, טווחים |
| `core/ai_scorer.py` | חישוב ציון AI לכל מניה על סמך תנאים טכניים |
| `core/fetcher.py` | שליפת נתונים חיים ממקורות כמו yfinance ו־Finnhub |
| `core/notifier.py` | שליחת התראות לטלגרם לפי תנאים מוגדרים |
| `core/utils.py` | פונקציות עזר לחישוב כמויות / בדיקת שוק פעיל |
| `core/scanner.py` | טעינת רשימת מניות מסננים חיצוניים (S&P 500 וכו') |

---

## 💡 הסבר: התראות מהחוקר

> ❗ לא: "תקנה עכשיו מיידית"  
> ✅ כן: "יש פה מניה שעברה פילטר חכם – כדאי לבדוק או לפעול בזהירות"

### הקריטריונים:
- AI Score גבוה (מעל 85)
- מחיר קרוב לתחתית
- נפח מסחר חריג או מגמה חיובית
- המלצות אנליסטים / סנטימנט חיובי

### מה לעשות כשמתקבלת התראה?
1. בדוק את המחיר מול buy_price
2. בדוק מגמה כללית (התחזקה?)
3. לחץ "➕ הוסף לתיק" אם רוצה לעקוב
4. הבוט יתחיל לעקוב אחריה ולעדכן

---

## 📎 דגשים
- כל הפקודות בטלגרם פועלות רק למנהל (`OWNER_CHAT_ID`)
- ניתן להפעיל את כל הבוט בלחיצת כפתור אחת ע"י סקריפט חיצוני (למשל `run_all.py`)
- אפשר להפעיל `listener.py` במקביל ל־`main.py`

---

בהצלחה 💰
